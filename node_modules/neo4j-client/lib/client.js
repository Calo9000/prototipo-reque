'use strict';

var Request = require('request');
var Url = require('url');

function Client(options) {
  if (!(this instanceof Client)) {
    return new Client(options);
  }
  options = options || {};
  this._url = Url.format({
    protocol: 'http',
    hostname: options.hostname || 'localhost',
    port: options.port || 7474,
    pathname: '/db/data/'
  });
};

Client.prototype.createNode = function(properties, callback) {
  var options = {
    url: Url.resolve(this._url, 'node'),
    json: properties
  };
  Request.post(options, function(err, res, body) {
    if (err) {
      return callback(err);
    }
    callback(null, body);
  });
};

module.exports = Client;
